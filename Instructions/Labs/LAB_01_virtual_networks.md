---
lab:
  title: 练习：为 Web 应用程序提供网络隔离和分段
  module: Guided Project - Configure secure access to workloads with Azure virtual networking services
---

# 实验室：通过隔离和分段提供共享的服务中心虚拟网络

## 场景

你的任务是将零信任原则应用于 Azure 中的中心虚拟网络。[](https://learn.microsoft.com/security/zero-trust/azure-infrastructure-networking) IT 部门需要为分支网络中的 Web 应用程序提供网络隔离和分段。 若要为 Web 应用程序提供网络隔离和分段，你需要创建包含 IT 团队提供的地址空间的子网的 Azure 虚拟网络。 创建虚拟网络后，下一步是配置虚拟网络对等互连。 这允许虚拟网络以安全且私密的方式相互通信。

### 体系结构关系图

![显示两个对等虚拟网络的关系表。](../Media/task-1.png)

### 技能任务

- 创建虚拟网络
- 创建子网
- 配置 VNet 对等互连

## 练习说明

>**** 备注：若要完成此实验室，需要分配了参与者 RBAC 角色的 **** Azure 订阅[](https://azure.microsoft.com/free/)。

> 在此实验室中，当系统要求你为未指定的任何属性创建资源时，请使用默认值。

### 创建中心和分支虚拟网络和子网

首先创建上图中显示的虚拟网络。

1. 登录到 **Azure 门户** - `https://portal.azure.com`。
   
1. 搜索并选择 `Virtual Networks`。
   
1. 选择“**+ 创建**”并完成 **app-vnet** 的配置。 此虚拟网络需要两个子网：**前端**和**后端**。 

    | 属性             | 值           |
    | :------------------- | :-------------- |
    | 资源组       | RG1****         |
    | 虚拟网络名称 | `app-vnet`    |
    | 区域               | **美国东部**     |
    | IPv4 地址空间   | 10.1.0.0/16**** |
    | 子网名称          | `frontend`    |
    | 子网地址范围 | **10.1.0.0/24** |
    | 子网名称          | `backend`     |
    | 子网地址范围 | **10.1.1.0/24** |

    **** 备注：将其他设置保留为默认设置。 完成后，选择“**查看 + 创建**”，然后选择“**创建**”。
   
1. 创建 **Hub-vnet** 虚拟网络配置。 此虚拟网络有防火墙子网。 

    | 属性             | 值                    |
    | :------------------- | :----------------------- |
    | 资源组       | RG1****                  |
    | 名称                 | `hub-vnet` |
    | 区域               | **美国东部**              |
    | IPv4 地址空间   | **10.0.0.0/16**          |
    | 子网名称          | **AzureFirewallSubnet**  |
    | 子网地址范围 | **10.0.0.0/24**          |

1. 部署完成后，搜索并选择 **资源组**。 确认新虚拟网络是资源组的一部分。 

### 设置虚拟网络之间的对等关系

1. 搜索并选择 `app-vnet` 虚拟网络。
   
1. 在“**设置**”边栏选项卡中选择“**对等互连**”。
   
1. **+ 创建**两个虚拟网络之间的对等互连。 

    | 属性                                 | Value                          |
    | :--------------------------------------- | :----------------------------- |
    | 对等互连链接名称              | `app-vnet-to-hub` |
    | 虚拟网络    | `hub-vnet` |
    | 本地虚拟网络对等互连链接名称 | `hub-to-app-vnet` |

    **** 备注：将其他设置保留为默认设置。 选择“添加”，创建虚拟网络对等互连****。

    [详细了解虚拟网络对等互连](https://learn.microsoft.com/azure/virtual-network/virtual-network-manage-peering?tabs=peering-portal)

1. 部署完成后，验证**对等互连状态**是否为“**已连接**”。 
